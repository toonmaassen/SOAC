import shutil

#namelist file to edit
infile = 'radmod_namelist'

#namelist parameter to edit
itemname = 'CO2' 

#annual percentage of change
perc = 5

# count the years in yearfile:
yearfile=open('yearfile','r')
yrlines=yearfile.readlines()
prevyear=int(yrlines[0])
yearfile.close()
curyear=prevyear+1

newyearfile=open('yearfile.new', 'w')
newyearfile.write(str(curyear))
newyearfile.close()
shutil.copy('yearfile.new', 'yearfile')

f=open(infile, 'r')
lines = f.readlines()
f.close()

newfile = infile + '.new'
f=open(newfile, 'w')

#CO2-eq ppm concentrations from RCP 8.5:
CO2list=[277.01467, 277.8388, 278.69351, 278.74752, 278.79644, 278.84896, 278.88421, 278.92512, 278.99387, 279.06906, 279.1513, 279.2424, 279.34214, 279.44672, 279.55094, 279.65007, 279.71846, 279.78173, 279.86798, 279.95858, 280.05821, 280.16952, 280.29117, 280.41905, 280.54845, 280.67599, 280.77766, 280.87905, 281.00453, 281.12966, 281.25415, 281.37816, 281.47794, 281.57703, 281.69873, 281.7953, 281.89146, 281.96434, 282.06097, 282.20419, 282.32288, 282.41845, 282.51428, 282.63057, 282.73903, 282.8364, 282.90004, 282.9574, 283.03571, 283.11463, 283.17382, 283.21462, 283.25897, 283.32685, 283.4149, 283.49758, 283.57508, 283.62677, 283.65484, 283.70645, 283.76004, 283.8156, 283.87272, 283.93097, 284.0128, 283.96219, 283.89979, 283.8817, 283.77007, 283.66423, 283.55955, 283.36933, 283.20262, 283.15294, 283.15861, 283.1704, 283.21078, 283.30585, 283.42935, 283.57864, 283.71288, 283.88515, 284.05105, 284.22002, 284.38831, 284.47783, 284.6785, 284.4941, 284.2542, 284.31698, 284.37752, 284.48655, 284.57144, 284.75751, 284.87162, 284.54001, 283.90984, 284.24023, 284.82703, 284.92869, 284.90678, 284.53849, 284.13273, 284.15643, 284.50991, 284.76049, 284.4221, 283.27687, 282.35666, 282.41152, 282.73787, 283.19648, 283.93288, 284.51148, 284.74683, 284.54128, 284.58021, 285.21573, 285.70213, 286.0759, 286.62046, 287.06145, 287.22534, 286.96157, 286.96533, 287.04595, 286.86678, 286.80077, 286.76394, 286.66071, 286.45183, 286.39693, 286.48722, 286.5877, 286.67626, 286.79938, 286.77043, 286.76808, 286.79694, 286.84493, 287.01406, 287.05312, 287.07137, 287.53578, 288.17921, 288.48048, 288.96295, 289.66408, 290.20208, 290.93296, 291.78371, 292.2385, 292.54437, 292.99248, 293.81347, 294.37098, 294.95151, 295.68377, 295.58615, 295.65484, 296.25067, 296.81103, 297.14059, 297.49651, 297.96527, 298.61802, 299.6497, 300.71564, 301.45026, 301.83497, 302.24383, 302.53336, 302.82266, 303.56161, 304.10605, 304.10083, 303.847, 303.56374, 303.42564, 303.26736, 303.23386, 303.00439, 302.45801, 302.01134, 301.9696, 301.92017, 300.87693, 299.88451, 299.76378, 299.76984, 299.80994, 299.87995, 300.01814, 300.42588, 301.36642, 302.54075, 302.71708, 302.62276, 303.11374, 303.60921, 304.41983, 305.56389, 306.5942, 307.80774, 309.59802, 311.80753, 314.08678, 316.19275, 318.11545, 319.5999, 320.88163, 322.19127, 323.87398, 326.20992, 328.74045, 330.86448, 332.22762, 333.03368, 334.24432, 336.14519, 338.19811, 340.22271, 342.40873, 345.08452, 347.72931, 349.91054, 351.18907, 351.54763, 352.27475, 353.73698, 355.93868, 358.2628, 359.83008, 361.47123, 363.28251, 364.36712, 365.65347, 367.97846, 370.51984, 372.78524, 375.19996, 378.15546, 381.3568, 384.74081, 388.42565, 392.05839, 395.27227, 398.43505, 401.79376, 405.27595, 408.90146, 412.66275, 416.54905, 420.55429, 424.72174, 429.09113, 433.67451, 438.35716, 443.07271, 447.89186, 452.81977, 457.85702, 462.99651, 468.22769, 473.54556, 479.08885, 485.00313, 491.12015, 497.33571, 503.72772, 510.3047, 517.06703, 524.01271, 531.13088, 538.4067, 545.7943, 553.2511, 560.84527, 568.61665, 576.54983, 584.6734, 593.00721, 601.56231, 610.3439, 619.34623, 628.43015, 637.45629, 646.55197, 655.82329, 665.22649, 674.76367, 684.4678, 694.3603, 704.45429, 714.75889, 725.22685, 735.80212, 746.47188, 757.2226, 768.04931, 778.93799, 789.88891, 800.93238, 812.09823, 823.40986, 834.84352, 846.35818, 857.96001, 869.65468, 881.43384, 893.29986, 905.2316, 917.24063, 929.33029, 941.53025, 954.05292, 967.0627, 980.37638, 993.81254, 1007.3762, 1021.0685, 1034.8947, 1048.8033, 1062.8068, 1076.9606, 1091.0723, 1104.9867, 1118.8894, 1132.8854, 1146.9227, 1160.9927, 1175.0915, 1189.2172, 1203.3531, 1217.4831, 1231.4453, 1245.1089, 1258.7118, 1272.3631, 1286.0039, 1299.6449, 1313.2663, 1326.8737, 1340.4348, 1353.9384, 1367.3773, 1380.7579, 1394.1578, 1407.5854, 1421.0553, 1434.5876, 1448.133, 1461.699, 1475.2666, 1488.8007, 1502.3136, 1515.7727, 1529.1849, 1542.6285, 1556.1455, 1569.7242, 1583.3546, 1597.0407, 1610.7759, 1624.4985, 1638.2113, 1651.9101, 1665.5331, 1679.1409, 1692.7983, 1706.5082, 1720.2941, 1734.1745, 1748.1048, 1762.0503, 1776.0164, 1789.9975, 1803.9513, 1817.8432, 1831.7032, 1845.586, 1859.5456, 1873.6069, 1887.7443, 1901.9481, 1916.1945, 1930.4295, 1944.5835, 1958.5733, 1972.3163, 1985.8391, 1999.2677, 2012.6315, 2025.9033, 2039.0912, 2052.1869, 2065.1652, 2078.0071, 2090.7003, 2103.2366, 2115.5215, 2127.5722, 2139.5351, 2151.4334, 2163.2536, 2174.9897, 2186.6278, 2198.1472, 2209.5346, 2220.7839, 2231.8432, 2242.6405, 2253.2131, 2263.6715, 2274.0562, 2284.3744, 2294.6286, 2304.784, 2314.822, 2324.7224, 2334.4378, 2343.9549, 2353.2342, 2362.2827, 2371.1944, 2380.0242, 2388.7933, 2397.4926, 2406.0951, 2414.5607, 2422.8652, 2431.0277, 2438.9634, 2446.6266, 2454.1038, 2461.4344, 2468.6549, 2475.7965, 2482.874, 2489.8594, 2496.7102, 2503.4036, 2509.9279, 2516.2231, 2522.2516, 2528.0934, 2533.7821, 2539.3504, 2544.8533, 2550.2925, 2555.6223, 2560.803, 2565.8282, 2570.7045, 2575.3429, 2579.6811, 2583.815, 2587.8249, 2591.735, 2595.5646, 2599.3154, 2602.9545, 2606.4533, 2609.7912, 2612.9632, 2615.9006, 2618.5816, 2621.0558, 2623.3551, 2625.5485, 2627.6494, 2629.6854, 2631.6429, 2633.4721, 2635.1151, 2636.5467, 2637.8139, 2638.7918, 2639.4925, 2640.093, 2640.609, 2641.0119, 2641.3297, 2641.5642, 2641.667, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826, 2641.6826]
#CO2-eq ppm concentrations from RCP 2.6:
#CO2list=[277.01467, 277.8388, 278.69351, 278.74752, 278.79644, 278.84896, 278.88421, 278.92512, 278.99387, 279.06906, 279.1513, 279.2424, 279.34214, 279.44672, 279.55094, 279.65007, 279.71846, 279.78173, 279.86798, 279.95858, 280.05821, 280.16952, 280.29117, 280.41905, 280.54845, 280.67599, 280.77766, 280.87905, 281.00453, 281.12966, 281.25415, 281.37816, 281.47794, 281.57703, 281.69873, 281.7953, 281.89146, 281.96434, 282.06097, 282.20419, 282.32288, 282.41845, 282.51428, 282.63057, 282.73903, 282.8364, 282.90004, 282.9574, 283.03571, 283.11463, 283.17382, 283.21462, 283.25897, 283.32685, 283.4149, 283.49758, 283.57508, 283.62677, 283.65484, 283.70645, 283.76004, 283.8156, 283.87272, 283.93097, 284.0128, 283.96219, 283.89979, 283.8817, 283.77007, 283.66423, 283.55955, 283.36933, 283.20262, 283.15294, 283.15861, 283.1704, 283.21078, 283.30585, 283.42935, 283.57864, 283.71288, 283.88515, 284.05105, 284.22002, 284.38831, 284.47783, 284.6785, 284.4941, 284.2542, 284.31698, 284.37752, 284.48655, 284.57144, 284.75751, 284.87162, 284.54001, 283.90984, 284.24023, 284.82703, 284.92869, 284.90678, 284.53849, 284.13273, 284.15643, 284.50991, 284.76049, 284.4221, 283.27687, 282.35666, 282.41152, 282.73787, 283.19648, 283.93288, 284.51148, 284.74683, 284.54128, 284.58021, 285.21573, 285.70213, 286.0759, 286.62046, 287.06145, 287.22534, 286.96157, 286.96533, 287.04595, 286.86678, 286.80077, 286.76394, 286.66071, 286.45183, 286.39693, 286.48722, 286.5877, 286.67626, 286.79938, 286.77043, 286.76808, 286.79694, 286.84493, 287.01406, 287.05312, 287.07137, 287.53578, 288.17921, 288.48048, 288.96295, 289.66408, 290.20208, 290.93296, 291.78371, 292.2385, 292.54437, 292.99248, 293.81347, 294.37098, 294.95151, 295.68377, 295.58615, 295.65484, 296.25067, 296.81103, 297.14059, 297.49651, 297.96527, 298.61802, 299.6497, 300.71564, 301.45026, 301.83497, 302.24383, 302.53336, 302.82266, 303.56161, 304.10605, 304.10083, 303.847, 303.56374, 303.42564, 303.26736, 303.23386, 303.00439, 302.45801, 302.01134, 301.9696, 301.92017, 300.87693, 299.88451, 299.76378, 299.76984, 299.80994, 299.87995, 300.01814, 300.42588, 301.36642, 302.54075, 302.71708, 302.62276, 303.11374, 303.60921, 304.41983, 305.56389, 306.5942, 307.80774, 309.59802, 311.80753, 314.08678, 316.19275, 318.11545, 319.5999, 320.88163, 322.19127, 323.87398, 326.20992, 328.74045, 330.86448, 332.22762, 333.03368, 334.24432, 336.14519, 338.19811, 340.22271, 342.40873, 345.08452, 347.72931, 349.91054, 351.18907, 351.54763, 352.27475, 353.73698, 355.93868, 358.2628, 359.83008, 361.47123, 363.28251, 364.36712, 365.65347, 367.97846, 370.51984, 372.78524, 375.10733, 377.78302, 380.58411, 383.52121, 386.70186, 390.12466, 393.80038, 397.55122, 401.14961, 404.6121, 407.97407, 411.24161, 414.41543, 417.49975, 420.54587, 423.46397, 426.13517, 428.59283, 430.90787, 433.14977, 435.33254, 437.45807, 439.51961, 441.50756, 443.41805, 445.15424, 446.61843, 447.94001, 449.21029, 450.3993, 451.51977, 452.57601, 453.56851, 454.48974, 455.32873, 455.97977, 456.34012, 456.51933, 456.61284, 456.61779, 456.55646, 456.44117, 456.27749, 456.07196, 455.82122, 455.44144, 454.85279, 454.14536, 453.41568, 452.65504, 451.86092, 451.05176, 450.2375, 449.42024, 448.59908, 447.8341, 447.18314, 446.5635, 445.9207, 445.27723, 444.61902, 443.94355, 443.26882, 442.60433, 441.9517, 441.34334, 440.80241, 440.29959, 439.80947, 439.32684, 438.85022, 438.36713, 437.87643, 437.39719, 436.9398, 436.47529, 435.97125, 435.47216, 434.99707, 434.51701, 434.03063, 433.53784, 433.02784, 432.50084, 431.97678, 431.47294, 430.99896, 430.54808, 430.11047, 429.68013, 429.25077, 428.82102, 428.39079, 427.94949, 427.49743, 426.9627, 426.26508, 425.54487, 424.89771, 424.27311, 423.65808, 423.04592, 422.43493, 421.82474, 421.20468, 420.57496, 419.95484, 419.35489, 418.77775, 418.22299, 417.6819, 417.14286, 416.60018, 416.05294, 415.50145, 414.9358, 414.35674, 413.7837, 413.22739, 412.69062, 412.17267, 411.66423, 411.15823, 410.65346, 410.14861, 409.64385, 409.12927, 408.60556, 408.09179, 407.59837, 407.12789, 406.67994, 406.24609, 405.81515, 405.38175, 404.94518, 404.50587, 404.05437, 403.59166, 403.13677, 402.70009, 402.28424, 401.88886, 401.50569, 401.12375, 400.73785, 400.3474, 399.95292, 399.54519, 399.12532, 398.71219, 398.31607, 397.93956, 397.58227, 397.23602, 396.88999, 396.53912, 396.18289, 395.82185, 395.44698, 395.05948, 394.67807, 394.3129, 393.96649, 393.63842, 393.32058, 393.00229, 392.67858, 392.34897, 392.01405, 391.66498, 391.30302, 390.94672, 390.60611, 390.28365, 389.97887, 389.68372, 389.38764, 389.08573, 388.77757, 388.46376, 388.13561, 387.79445, 387.45867, 387.13817, 386.83535, 386.54969, 386.27319, 385.99539, 385.71149, 385.42107, 385.12479, 384.81407, 384.49029, 384.1717, 383.86809, 383.58177, 383.31219, 383.05139, 382.78901, 382.52032, 382.24493, 381.96352, 381.66763, 381.3587, 381.05482, 380.76568, 380.49351, 380.23773, 379.99041, 379.74129, 379.4857, 379.22328, 378.95471, 378.67167, 378.37565, 378.08459, 377.80806, 377.54824, 377.30449, 377.06894, 376.8314, 376.58726, 376.33619, 376.0789, 375.80717, 375.52253, 375.24279, 374.97741, 374.7285, 374.4954, 374.27024, 374.04295, 373.80895, 373.56796, 373.32068, 373.05902, 372.78453, 372.5149, 372.25949, 372.02035, 371.79675, 371.58089, 371.36276, 371.13785, 370.90589, 370.66759, 370.41497, 370.14964, 369.88913, 369.64271, 369.41237, 369.19735, 368.98988, 368.78001, 368.5633, 368.3395, 368.10933, 367.86491, 367.60788, 367.35566, 367.11742, 366.89509, 366.68786, 366.488, 366.28565, 366.0764, 365.86002, 365.63725, 365.40031, 365.15087, 364.90624, 364.67548, 364.46047, 364.26038, 364.06747, 363.87198, 363.66955, 363.45997, 363.24399, 363.01391, 362.77145, 362.5338, 362.30992, 362.10165, 361.9081, 361.72159, 361.53241, 361.33625, 361.13292, 360.92318, 360.69943, 360.46342, 360.23221, 360.0147, 359.81265, 359.62516, 359.44455, 359.26119, 359.07082, 358.87327, 358.6693, 358.45141, 358.22138, 357.99616, 357.78455, 357.58828, 357.40639, 357.23126, 357.05329, 356.86829, 356.6761, 356.47749, 356.26504, 356.04057, 355.82093, 355.61483, 355.42393, 355.24726, 355.07721, 354.90427, 354.72426, 354.53705, 354.34344, 354.13607, 353.9168, 353.70237, 353.50141, 353.31554, 353.14374, 352.97844, 352.81017, 352.63482, 352.45228, 352.26332, 352.06071, 351.84631, 351.63677, 351.44064, 351.25947, 351.09223, 350.93137, 350.76748, 350.5965, 350.41831, 350.23373, 350.03557, 349.82575, 349.62081, 349.4292, 349.25246, 349.08951, 348.9328, 348.77303, 348.60614, 348.43205, 348.25157, 348.05761, 347.8521, 347.65149, 347.46416, 347.29158, 347.13266, 346.97988, 346.82396, 346.66092, 346.49069, 346.31408, 346.12408, 345.92264, 345.72612, 345.54283, 345.37419, 345.21907, 345.06998, 344.91772, 344.75831, 344.59171, 344.41875, 344.23249, 344.03491, 343.84227, 343.6628, 343.49789, 343.34637, 343.20077, 343.05195, 342.89597, 342.73282, 342.56331, 342.38059, 342.18667, 341.99771, 341.82187, 341.6605, 341.51238, 341.37009, 341.22453, 341.07181, 340.91191, 340.74568, 340.56632, 340.37588, 340.19043, 340.01804, 339.86002, 339.71514, 339.57599, 339.43352, 339.28389, 339.12709, 338.96397, 338.78781, 338.60068, 338.41856, 338.24947, 338.09465, 337.95285, 337.81668, 337.67716, 337.53046, 337.3766, 337.21645, 337.04334, 336.85937, 336.68044, 336.51448, 336.36272, 336.22386, 336.09053, 335.9538, 335.8099, 335.65885, 335.50152, 335.33132, 335.15038, 334.97449, 334.81154, 334.66269, 334.52663, 334.39602, 334.26197, 334.12073, 333.97236, 333.81773, 333.65032, 333.47227, 333.2993, 333.13922, 332.99317, 332.85979, 332.73177, 332.60027, 332.46158, 332.31578, 332.16373, 331.99898, 331.82371, 331.65354, 331.49623, 331.35285, 331.22204, 331.0965, 330.96744, 330.8312, 330.68785, 330.53827, 330.37608, 330.20347, 330.036, 329.88133, 329.74052, 329.61218, 329.48902, 329.3623, 329.2284, 329.08741, 328.9402, 328.78047, 328.61043, 328.44554, 328.29343, 328.15509, 328.02911, 327.90823, 327.78377, 327.65211, 327.51338, 327.36845, 327.21108, 327.04351, 326.88112, 326.73146, 326.59551, 326.47181, 326.41262]

#Change the CO2 value in the radmod_namelist file:
for line in lines:  
    if 'CO2' in line:
        oldvalue = float(line.split('=')[1])
        value = CO2list[curyear]
        newline = ' %s = %s\n'% (itemname, str(value))
        
    else:
        newline=line
    f.write(newline)

f.close()

#Print the changed paramters:
print('Changed the parameter '+itemname+' in '+infile+' from '+str(oldvalue)+' to '+str(value)+'. Changed year from '+str(prevyear)+' to '+str(curyear))
shutil.copy(newfile, infile)
